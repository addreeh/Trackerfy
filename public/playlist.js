function createSvgElement(e,t,n){const o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.setAttribute("class",`icon icon-tabler ${e}`),o.setAttribute("width",n),o.setAttribute("height",n),o.setAttribute("viewBox","0 0 24 24"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke","#C6C6C6"),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),o.innerHTML=t,o}window.addEventListener("click",(function(e){e.target==document.querySelector("body > section:first-of-type")?(document.querySelector("body > section:first-of-type").classList.remove("active"),document.getElementById("2-info-img").style.display="block",document.getElementById("3-info-img").style.display="block",document.querySelector(".back-img").style.zIndex=1,document.getElementById("top-artist-img").style.zIndex=2,document.querySelector(".icon-tabler-dots-vertical").style.zIndex=999,topArtistDivActive=!1,topArtistDiv.addEventListener("mouseover",handleTopArtistMouseOver),topArtistDiv.addEventListener("mouseout",handleTopArtistMouseOut)):e.target==document.querySelector("body > section:nth-of-type(2)")&&(document.querySelector("body > section:nth-of-type(2)").classList.remove("active"),document.getElementById("2-info-img").style.display="block",document.getElementById("3-info-img").style.display="block",document.querySelector(".back-img").style.zIndex=1,document.getElementById("top-artist-img").style.zIndex=2,document.querySelector(".icon-tabler-dots-vertical").style.zIndex=999,topArtistDivActive=!1,topArtistDiv.addEventListener("mouseover",handleTopArtistMouseOver),topArtistDiv.addEventListener("mouseout",handleTopArtistMouseOut),topArtistDiv.dispatchEvent(new Event("mouseout")))})),document.addEventListener("click",(()=>{searchField.classList.contains("active")&&""===searchField.value.trim()&&searchField.classList.remove("active")}));let searchField=document.querySelector("input");function searchArtist(){let e=document.querySelector("nav input").value.toLowerCase().trim();document.querySelectorAll(".sub-div-container").forEach((t=>{let n=t.querySelector(".sub-div").querySelector(".text-center").querySelector(".artist-name").textContent.toLowerCase();t.style.display=n.includes(e)?"":"none"})),document.querySelector(".new-text").style.display=e?"none":""}searchField.addEventListener("click",(function(e){e.stopPropagation()})),searchField.addEventListener("input",searchArtist),searchField.addEventListener("change",searchArtist),document.querySelector("header nav:first-child").addEventListener("click",(function(e){e.stopPropagation(),document.querySelector("header img").classList.toggle("active"),searchField.classList.toggle("active"),searchField.classList.contains("active")&&searchField.focus()}));let originalArtistList,topArtistDiv=document.querySelector("main section:first-child"),topArtistDivActive=!1;function handleTopArtistMouseOver(){topArtistDivActive||(document.querySelector("header").style.opacity="0.1",Array.from(document.querySelector("main").children).forEach((e=>{e!==topArtistDiv&&(e.style.opacity="0.1")})))}function handleTopArtistMouseOut(){topArtistDivActive||(document.querySelector("header").style.opacity="1",Array.from(document.querySelector("main").children).forEach((e=>{e.style.opacity="1"})))}topArtistDiv.addEventListener("mouseover",handleTopArtistMouseOver),topArtistDiv.addEventListener("mouseout",handleTopArtistMouseOut),document.querySelector(".icon-tabler-dots-vertical").addEventListener("click",(function(){document.querySelector("body > section:first-of-type").classList.add("active"),document.getElementById("2-info-img").style.display="none",document.getElementById("3-info-img").style.display="none",document.querySelector(".back-img").style.zIndex=0,document.getElementById("top-artist-img").style.zIndex=0,document.querySelector(".icon-tabler-dots-vertical").style.zIndex=0,topArtistDivActive=!0,topArtistDiv.removeEventListener("mouseover",handleTopArtistMouseOver),topArtistDiv.removeEventListener("mouseout",handleTopArtistMouseOut);const e=document.querySelector(".progress-bar");let t=1;const n=setInterval((()=>{t>=100?clearInterval(n):(t++,e.style.width=`${t}%`)}),20)}));let isDescending=!0;const orderList=document.querySelector(".new-text");function updateOrderListUI(e){const t=e?"icon-tabler-sort-descending":"icon-tabler-sort-ascending",n=e?'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 6l9 0" /><path d="M4 12l7 0" /><path d="M4 18l7 0" /><path d="M15 15l3 3l3 -3" /><path d="M18 6l0 12" />':'<path stroke="none" d="M0 0h24v24H0z" fill="none" /><path d="M4 6l7 0" /><path d="M4 12l7 0" /><path d="M4 18l9 0" /><path d="M15 9l3 -3l3 3" />  <path d="M18 6l0 12" />';orderList.removeChild(orderList.firstChild);const o=document.createElement("span");o.textContent=sortOrder,orderList.appendChild(o);const i=createSvgElement(t,n,"15");orderList.appendChild(i)}orderList.addEventListener("click",(()=>{isDescending=!isDescending,sortOrder=isDescending?"Sort descending":"Sort ascending",orderList.innerHTML=sortOrder,updateOrderListUI(isDescending),originalArtistList.reverse(),updateSubDivsUI(originalArtistList)}));const loadingOverlay=document.querySelector("body > section:nth-of-type(3)");function updateUI(e){document.querySelector(".modal-content").style.backgroundColor=e.playlistInfo.color,document.querySelectorAll(".modal-text p").forEach((t=>{t.style.color=e.playlistInfo.text}));let t=e.playlistInfo.name,n=document.querySelector(".left-text");n.innerHTML="";for(let e=0;e<t.length;e++){let o=document.createElement("span");o.textContent=t[e],0!==e&&e!==t.length-1&&(o.style.borderBottom="3px solid #42c83c",1==e&&(o.style.borderBottomLeftRadius="2px"),e==t.length-2&&(o.style.borderBottomRightRadius="2px")),n.appendChild(o)}n.title=t;const o=e.detailedArtistInfo[Object.keys(e.detailedArtistInfo)[0]];updateArtistUI("top",o);const i=e.detailedArtistInfo[Object.keys(e.detailedArtistInfo)[1]];updateArtistUI("2",i);const r=e.detailedArtistInfo[Object.keys(e.detailedArtistInfo)[2]];updateArtistUI("3",r);addMouseOverEffect(document.getElementById("2-artist-img"),"2-info-img");addMouseOverEffect(document.getElementById("3-artist-img"),"3-info-img"),topArtistDiv.addEventListener("click",(()=>{showModal(o)})),document.getElementById("2-artist-info").addEventListener("click",(()=>{showModal(i)})),document.getElementById("3-artist-info").addEventListener("click",(()=>{showModal(r)})),originalArtistList=Object.values(e.detailedArtistInfo).slice(3),document.getElementById("playlist-image").src=e.playlistInfo.image,document.getElementById("playlist-image").alt=e.playlistInfo.name,document.getElementById("playlist-name").innerHTML=`<a href="${e.playlistInfo.url}" target="_blank">${e.playlistInfo.name}</a>`,document.getElementById("playlist-name").title=e.playlistInfo.name,document.getElementById("playlist-owner").innerHTML=`Owner âžœ <a href="${e.playlistInfo.owner.url}" target="_blank">${e.playlistInfo.owner.name}</a>`,document.getElementById("playlist-owner").title=e.playlistInfo.owner.name,document.getElementById("playlist-songs").innerHTML=` ${e.playlistInfo.totalSongs} <svg class='icon icon-tabler icon-tabler-music' width='20' height='20' viewBox='0 0 24 24' stroke-width='2' stroke='#42C83C' fill='none' stroke-linecap='round' stroke-linejoin='round'><path stroke='none' d='M0 0h24v24H0z' fill='none' /><path d='M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0' /><path d='M13 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0' /><path d='M9 17v-13h10v13' /><path d='M9 8h10' /></svg> ${Object.keys(e.detailedArtistInfo).length} <svg class='icon icon-tabler icon-tabler-user' width='20' height='20' viewBox='0 0 24 24' stroke-width='2' stroke='currentColor' fill='none' stroke-linecap='round' stroke-linejoin='round'><path stroke='none' d='M0 0h24v24H0z' fill='none' /><path d='M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0' /><path d='M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2' /></svg> ${e.playlistInfo.totalDuration.horas}:${e.playlistInfo.totalDuration.minutos} <svg class='icon icon-tabler icon-tabler-clock-filled' width='20' height='20' viewBox='0 0 24 24' stroke-width='2' stroke='currentColor' fill='none' stroke-linecap='round' stroke-linejoin='round'><path stroke='none' d='M0 0h24v24H0z' fill='none' /><path d='M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-5 2.66a1 1 0 0 0 -.993 .883l-.007 .117v5l.009 .131a1 1 0 0 0 .197 .477l.087 .1l3 3l.094 .082a1 1 0 0 0 1.226 0l.094 -.083l.083 -.094a1 1 0 0 0 0 -1.226l-.083 -.094l-2.707 -2.708v-4.585l-.007 -.117a1 1 0 0 0 -.993 -.883z' stroke-width='0' fill='currentColor' /></svg>`,updateSubDivsUI(originalArtistList)}function updateArtistUI(e,t){document.getElementById(`${e}-artist-name`).innerHTML="";const n=document.createElement("a");n.href=t.artist.url,n.target="_blank",n.textContent=t.artist.name,document.getElementById(`${e}-artist-name`).appendChild(n),document.getElementById(`${e}-artist-percentage`).innerHTML=`${t.percentage.replace(".",",")}% | ${t.songs.length} songs`,t.artist.imagePng?document.getElementById(`${e}-artist-img`).src=t.artist.imagePng:document.getElementById(`${e}-artist-img`).src=t.artist.image}function addMouseOverEffect(e,t){const n=e.clientHeight,o=e.clientWidth;e.addEventListener("mousemove",(i=>{document.getElementById(t).style.display="none";const{layerX:r,layerY:l}=i,s=`perspective(500px) scale(1.1) rotateX(${(l-n/2)/n*20}deg) rotateY(${(r-o/2)/o*20}deg)`;e.style.transform=s})),e.addEventListener("mouseout",(()=>{document.getElementById(t).style.display="block",e.style.transform="perspective(500px) scale(1) rotateX(0) rotateY(0)"}))}function createSubDiv(e){const t=document.createElement("div");t.className="sub-div-container";const n=document.createElement("div");n.className="sub-div",n.innerHTML=`\n    <a href="${e.artist.url}" target="_blank">\n        <img src="${e.artist.image}" alt="${e.artist.name}">\n    </a>\n    <div class="text-center">\n        <p class="artist-name">\n            <a href="${e.artist.url}" target="_blank">${e.artist.name}</a>\n        </p>\n        <p class="artist-perc">${e.songs.length} songs</p>\n    </div>\n    <div class="text-right">${e.percentage.replace(".",",")}%</div>\n`;const o=createSvgElement("icon-tabler-info-circle-filled",'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm0 9h-1l-.117 .007a1 1 0 0 0 0 1.986l.117 .007v3l.007 .117a1 1 0 0 0 .876 .876l.117 .007h1l.117 -.007a1 1 0 0 0 .876 -.876l.007 -.117l-.007 -.117a1 1 0 0 0 -.764 -.857l-.112 -.02l-.117 -.006v-3l-.007 -.117a1 1 0 0 0 -.876 -.876l-.117 -.007zm.01 -3l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007z" stroke-width="0" fill="#565656" />',"30"),i=document.createElement("div");return i.className="icon-container",i.appendChild(o),t.appendChild(n),t.appendChild(i),t}function updateSubDivsUI(e){const t=document.querySelector("main section:nth-child(5)");t.innerHTML="",e.forEach(((e,n)=>{const o=createSubDiv(e);o.id=`subDiv${n}`;o.querySelector(".icon-tabler-info-circle-filled").addEventListener("click",(()=>{showModal(e)})),t.appendChild(o)}))}function isTooWhiteColor(e,t=600){let n;if(e.startsWith("#"))n=[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)];else{if(!e.startsWith("rgba"))return console.error("Formato de color no reconocido"),!1;n=e.match(/\d+/g).map(Number)}return n.reduce(((e,t)=>e+t),0)>t}function showModal(e){colorjs.prominent(e.songs[0].album.image,{amount:1}).then((e=>{const t=`rgba(${e.join(",")}, 1)`;let n=isTooWhiteColor(t);return document.querySelector(".modal-content-2").style.color=n?"#000":"#FFF",document.querySelector(".modal-content-2").style.backgroundColor=t,Promise.resolve()})).then((()=>{const t=document.querySelector("body > section:nth-of-type(2)");topArtistDivActive=!0,document.querySelector("body > section:nth-of-type(2)").classList.add("active"),document.getElementById("2-info-img").style.display="none",document.getElementById("3-info-img").style.display="none",document.querySelector(".back-img").style.zIndex=0,document.getElementById("top-artist-img").style.zIndex=0,topArtistDiv.removeEventListener("mouseover",handleTopArtistMouseOver),topArtistDiv.removeEventListener("mouseout",handleTopArtistMouseOut);const n=t.querySelector(".artist-content img"),o=t.querySelector(".artist-content-name"),i=t.querySelector(".followers");n.src=e.artist.image,n.alt=e.artist.name;const r=document.createElement("a");r.href=e.artist.url,r.target="_blank",r.textContent=e.artist.name,o.innerHTML="",o.appendChild(r),i.textContent=e.artist.followers,document.getElementById("artist-songs").innerHTML=`${e.songs.length} songs`,document.getElementById("artist-percentage").innerHTML=`${e.percentage.replace(".",",")}%`;const l=document.getElementById("songs-container");l.innerHTML="",e.songs.forEach((e=>{const t=createSongDiv(e);l.appendChild(t)}))})).catch((e=>{console.error("Error al aplicar el color o mostrar el modal:",e)}))}fetch("/playlistdata").then((e=>e.json())).then((e=>{let t=document.getElementById("top-artist-img");t.onload=function(){t.height>155&&(document.querySelector(".right-section").style.top="-49%")},loadingOverlay.style.display="none",updateUI(e)})).catch((e=>{loadingOverlay.style.display="none",console.error("Error fetching playlist information:",e);let t=encodeURIComponent("1");window.location.href="index.html?error="+t}));let isAnySoundPlaying=!1,currentPlayingAudio=null;function createSongDiv(e){const t=document.createElement("div");t.className="row-container",t.innerHTML+=`\n      <div class="column-img">\n        <div class="song-img">\n            <a href="${e.album.url}" target="_blank">\n                <img src="${e.album.image}" alt="">\n            </a>\n        </div>\n      </div>\n    `,t.innerHTML+=`\n  <div class="column-song">\n    <h5><a href=${e.url} target=_blank>${e.name}</a></h5>\n    <p>${e.artists.map((e=>e.name)).join(", ")}</p>\n  </div>\n`;const n=e.name.replace(/[^a-zA-Z0-9]/g,"-");e.preview_url&&(t.innerHTML+=`\n          <div class="column-play">\n            <svg id="play-icon-${n}" class="icon icon-tabler icon-tabler-player-play-filled play-icon-${n}" width="24"\n              height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"\n              stroke-linejoin="round">\n              <path stroke="none" d="M0 0h24v24H0z" fill="none" />\n              <path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"\n                stroke-width="0" fill="currentColor" />\n            </svg>\n            <svg  id="pause-icon-${n}" class="icon icon-tabler icon-tabler-player-pause-filled pause-icon-${n}" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n            <path stroke="none" d="M0 0h24v24H0z" fill="none" />\n            <path d="M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" stroke-width="0" fill="currentColor" />\n            <path d="M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z" stroke-width="0" fill="currentColor" />\n          </svg>\n          </div>\n        `);let o,i=!1;if(e.preview_url){const e=t.querySelector(`#play-icon-${n}`),o=t.querySelector(`#pause-icon-${n}`);e.addEventListener("click",(()=>{r(!0)})),o.addEventListener("click",(()=>{r(!1)}))}function r(t){t?(currentPlayingAudio&&(currentPlayingAudio.pause(),document.getElementById(`pause-icon-${currentPlayingAudio.id}`).style.display="none",document.getElementById(`play-icon-${currentPlayingAudio.id}`).style.display="block"),isAnySoundPlaying=!0,i=!0,o||(o=new Audio(e.preview_url),o.id=n,o.volume=.1,o.addEventListener("ended",(()=>{isAnySoundPlaying=!1,i=!1,document.getElementById(`pause-icon-${n}`).style.display="none",document.getElementById(`play-icon-${n}`).style.display="block"}))),currentPlayingAudio=o,o.play(),document.getElementById(`pause-icon-${n}`).style.display="block",document.getElementById(`play-icon-${n}`).style.display="none"):(isAnySoundPlaying=!1,i=!1,currentPlayingAudio&&currentPlayingAudio.pause(),document.getElementById(`pause-icon-${n}`).style.display="none",document.getElementById(`play-icon-${n}`).style.display="block")}return t}